# ============================================================================
# Meeting Transcriber - Environment Configuration
# ============================================================================
#
# This file contains all environment variables needed for the application.
# Follow these steps to get started:
#
# 1. Copy this file: cp .env.local.example .env.local
# 2. Fill in your actual API credentials below
# 3. Restart the development server: npm run dev
# 4. Verify configuration in Settings dialog or at /api/config/status
#
# SECURITY WARNING: Never commit .env.local to version control!
# The .env.local file is already in .gitignore to prevent accidental commits.
#
# For detailed setup instructions, see: lib/docs/ENV_SETUP.md
# ============================================================================

# ============================================================================
# OPTION 1: Azure OpenAI Service (Recommended for Enterprise)
# ============================================================================
# Use Azure OpenAI if you have an Azure subscription and Azure OpenAI access.
# The application will automatically use Azure if these variables are set.
#
# Required Azure OpenAI Variables:
# - AZURE_OPENAI_API_KEY
# - AZURE_OPENAI_ENDPOINT
#
# Optional but recommended:
# - AZURE_OPENAI_WHISPER_DEPLOYMENT
# - AZURE_OPENAI_GPT4_DEPLOYMENT
# ============================================================================

# Your Azure OpenAI API Key
# Location: Azure Portal > Your OpenAI Resource > Keys and Endpoint > KEY 1 or KEY 2
# Format: 32-character hexadecimal string
# Example: 1234567890abcdef1234567890abcdef
AZURE_OPENAI_API_KEY=your-azure-api-key-here

# Your Azure OpenAI Endpoint
# Location: Azure Portal > Your OpenAI Resource > Keys and Endpoint > Endpoint
# Format: https://YOUR-RESOURCE-NAME.openai.azure.com (no trailing slash)
# Example: https://my-company-openai.openai.azure.com
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com

# Azure OpenAI API Version
# Recommended: 2024-08-01-preview (latest features)
# Other stable versions: 2024-02-15-preview, 2023-12-01-preview
# See: https://learn.microsoft.com/en-us/azure/ai-services/openai/api-version-deprecation
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# Whisper Deployment Name
# This is the deployment name you created for the Whisper model in Azure OpenAI Studio
# Used for: Audio transcription
# Default: whisper-1 (if not specified)
# Location: Azure OpenAI Studio > Deployments > Your Whisper deployment
# Example: whisper-1, whisper-deployment, my-whisper-model
AZURE_OPENAI_WHISPER_DEPLOYMENT=whisper-1

# GPT-4 Deployment Name
# This is the deployment name you created for GPT-4 in Azure OpenAI Studio
# Used for: Meeting analysis, summaries, action items, and insights
# Default: gpt-4 (if not specified)
# Location: Azure OpenAI Studio > Deployments > Your GPT-4 deployment
# Recommended models: gpt-4, gpt-4-turbo, gpt-4-32k
# Example: gpt-4, gpt-4-turbo, my-gpt4-deployment
AZURE_OPENAI_GPT4_DEPLOYMENT=gpt-4

# Citations (Supporting Evidence) Deployment Name (Optional)
# Used for: Selecting better transcript excerpts for "View Supporting Evidence" (Advanced analyses)
# Default: gpt-4.1-mini
# Location: Azure OpenAI Studio > Deployments > Your citations deployment
AZURE_OPENAI_CITATIONS_DEPLOYMENT=gpt-4.1-mini

# Citations API Version (Optional)
# Allows citations to use a different Azure API version than the main client.
# Default: 2024-12-01-preview
AZURE_OPENAI_CITATIONS_API_VERSION=2024-12-01-preview

# ============================================================================
# OPTION 2: Standard OpenAI API (Alternative)
# ============================================================================
# Use standard OpenAI if you don't have Azure OpenAI access.
# The application will use OpenAI API if Azure variables are not set.
#
# Required OpenAI Variables:
# - OPENAI_API_KEY
#
# Optional:
# - OPENAI_ORGANIZATION_ID (only for multi-organization accounts)
#
# NOTE: If both Azure and OpenAI are configured, Azure takes priority.
# To use OpenAI instead, remove or comment out the Azure variables above.
# ============================================================================

# Your OpenAI API Key
# Location: https://platform.openai.com/api-keys
# Format: sk-proj-... or sk-...
# Example: sk-proj-1234567890abcdefghijklmnopqrstuvwxyz
# OPENAI_API_KEY=sk-proj-your-openai-api-key-here

# OpenAI Organization ID (Optional)
# Only required if you belong to multiple organizations
# Location: https://platform.openai.com/account/organization
# Format: org-...
# Example: org-1234567890abcdef
# OPENAI_ORGANIZATION_ID=org-your-organization-id

# Citations Model (Optional)
# Used for: Selecting better transcript excerpts for "View Supporting Evidence" (Advanced analyses)
# Default: gpt-4.1-mini
# OPENAI_CITATIONS_MODEL=gpt-4.1-mini

# ============================================================================
# Configuration Priority & Behavior
# ============================================================================
#
# The application checks for configuration in this order:
#
# 1. Azure OpenAI (Priority)
#    - Requires: AZURE_OPENAI_API_KEY + AZURE_OPENAI_ENDPOINT
#    - Uses Azure-specific deployments and API versions
#    - Recommended for enterprise and production use
#
# 2. Standard OpenAI (Fallback)
#    - Requires: OPENAI_API_KEY
#    - Uses standard OpenAI models (whisper-1, gpt-4-turbo-preview)
#    - Easier to set up, good for development
#
# 3. Not Configured (Error)
#    - Application will show configuration instructions
#    - API features will be disabled until configured
#
# ============================================================================

# ============================================================================
# How to Verify Configuration
# ============================================================================
#
# After setting up your environment variables:
#
# 1. Restart the development server:
#    npm run dev
#
# 2. Check configuration status (any of these methods):
#
#    a) Settings Dialog:
#       - Open the application
#       - Click Settings icon in header
#       - View "API Configuration" section
#       - Look for green checkmark (✓) = Configured
#
#    b) API Status Endpoint:
#       - Navigate to: http://localhost:3000/api/config/status
#       - Should return: { "configured": true, "provider": "azure", ... }
#
#    c) Server Logs:
#       - Check terminal for: "[OpenAI] Initialized ... client"
#       - Look for: "[OpenAI] Environment variables validated successfully"
#
# 3. Test functionality:
#    - Upload a test audio file
#    - Verify transcription works
#    - Check analysis features
#
# ============================================================================

# ============================================================================
# Security Best Practices
# ============================================================================
#
# CRITICAL - PLEASE READ:
#
# ✓ DO:
#   - Keep .env.local out of version control (already in .gitignore)
#   - Use different API keys for development and production
#   - Rotate API keys regularly (recommended: every 90 days)
#   - Set up usage limits in your provider's dashboard
#   - Monitor API usage for unexpected activity
#   - Use secret management systems in production (Azure Key Vault, AWS Secrets)
#   - Enable spending alerts in your provider dashboard
#
# ✗ DON'T:
#   - Never commit .env.local to Git
#   - Never share API keys in code, issues, or pull requests
#   - Never expose API keys in client-side code
#   - Never use production keys in development
#   - Never store API keys in CI/CD logs or outputs
#   - Never screenshot or email your API keys
#
# ============================================================================

# ============================================================================
# Troubleshooting
# ============================================================================
#
# Common Issues:
#
# 1. "Missing OpenAI configuration" error
#    - Ensure .env.local exists in project root
#    - Check variable names are exactly as specified (case-sensitive)
#    - Restart server after making changes
#
# 2. "Invalid endpoint" error
#    - Endpoint must start with https://
#    - Remove trailing slashes
#    - Don't include /openai/deployments in endpoint
#
# 3. "401 Unauthorized" error
#    - Verify API key is correct and not truncated
#    - Check if key has been rotated or revoked
#    - Try regenerating the key
#
# 4. "Deployment not found" error
#    - Verify deployment names match exactly (case-sensitive)
#    - Check deployments exist in Azure OpenAI Studio
#    - Ensure deployments are in "Succeeded" state
#
# For detailed troubleshooting, see: lib/docs/ENV_SETUP.md
#
# ============================================================================

# ============================================================================
# Additional Resources
# ============================================================================
#
# Azure OpenAI:
#   - Documentation: https://learn.microsoft.com/azure/ai-services/openai/
#   - Quickstart: https://learn.microsoft.com/azure/ai-services/openai/quickstart
#   - API Versions: https://learn.microsoft.com/azure/ai-services/openai/api-version-deprecation
#   - Pricing: https://azure.microsoft.com/pricing/details/cognitive-services/openai-service/
#
# Standard OpenAI:
#   - Documentation: https://platform.openai.com/docs
#   - API Keys: https://platform.openai.com/api-keys
#   - Pricing: https://openai.com/pricing
#   - Usage Dashboard: https://platform.openai.com/usage
#
# Application Documentation:
#   - Setup Guide: lib/docs/ENV_SETUP.md
#   - GitHub Issues: [Your repository URL]
#
# ============================================================================

# ============================================================================
# Example Configurations
# ============================================================================
#
# Example 1: Azure OpenAI (Complete)
# -----------------------------------
# AZURE_OPENAI_API_KEY=abc123def456ghi789jkl012mno345pq
# AZURE_OPENAI_ENDPOINT=https://mycompany-openai.openai.azure.com
# AZURE_OPENAI_API_VERSION=2024-08-01-preview
# AZURE_OPENAI_WHISPER_DEPLOYMENT=whisper-1
# AZURE_OPENAI_GPT4_DEPLOYMENT=gpt-4-turbo
#
# Example 2: Azure OpenAI (Minimal - uses defaults)
# -----------------------------------
# AZURE_OPENAI_API_KEY=abc123def456ghi789jkl012mno345pq
# AZURE_OPENAI_ENDPOINT=https://mycompany-openai.openai.azure.com
#
# Example 3: Standard OpenAI
# -----------------------------------
# OPENAI_API_KEY=sk-proj-abc123xyz789
#
# Example 4: Standard OpenAI (with organization)
# -----------------------------------
# OPENAI_API_KEY=sk-proj-abc123xyz789
# OPENAI_ORGANIZATION_ID=org-abc123def456
#
# ============================================================================

# ============================================================================
# Development vs Production
# ============================================================================
#
# Development (.env.local):
#   - Use this file with your development API keys
#   - Safe to use lower rate limits and quotas
#   - Test features and functionality here
#
# Production:
#   - DO NOT use .env.local in production
#   - Use proper secret management (Azure Key Vault, AWS Secrets Manager, etc.)
#   - Set environment variables via your hosting platform:
#     - Vercel: Project Settings > Environment Variables
#     - Netlify: Site Settings > Environment > Environment Variables
#     - Azure App Service: Configuration > Application Settings
#     - AWS: Systems Manager Parameter Store or Secrets Manager
#     - Docker: --env-file or -e flags
#     - Kubernetes: Secrets and ConfigMaps
#
# ============================================================================
